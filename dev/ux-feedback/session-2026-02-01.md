# UX Feedback Session - 2026-02-01

## Setup
- Player side: Runner
- Opponent: heuristic-corp (autonomous)
- Decks: Startup tutorial decks

## Summary
Played 3 turns as Runner. **Found 2 HIGH priority bugs** related to card selection display and --full-break affordability detection. Run automation otherwise working well.

---

## Friction Point: Mutual Favor shows raw card data

**Context**: Played Mutual Favor to search for an icebreaker.

**Problem**: The prompt showed raw Clojure data structures instead of formatted card names:
```
ğŸ“‹ Choose an Icebreaker
   Choices: 0.{:zone ["deck"], :images {:en {:default {:stock ["/img/cards/en/default/stock/30015.png"]}}}, :cid "8f52b0a0-3108-4ae3-9bc6-6ea4c2666da6", :type "Program", :abilities [{:async true, :breaks ["Sentry"], ...
```

This is completely unreadable. User has to parse through raw data to find the `:title` field.

**Expected**:
```
ğŸ“‹ Choose an Icebreaker
   Choices: 0.Carmen [Killer], 1.Cleaver [Fracter], 2.Mayfly [AI], 3.Unity [Decoder], 4.Cancel
```

**Severity**: HIGH - core functionality unusable without parsing raw data

**Root Cause**: `format-choice` in ai_core.clj doesn't handle card objects from stack searches

---

## Friction Point: --full-break loops on unaffordable abilities

**Context**: Running R&D with Cleaver installed but 0 credits. Palisade (barrier) encountered.

**Problem**: `--full-break` detected Cleaver's "Fully break Palisade (cost: 1)" ability and tried to use it, but failed due to insufficient credits. Instead of detecting the failure and falling back to tank/let-subs-fire, it kept trying the same ability in a loop:

```
ğŸ”¨ Auto-breaking Palisade with Cleaver
   Fully break Palisade (cost: 1 [Credits])
âŒ Ability failed: Cleaver - Ability not confirmed in game log (timeout)
   â†’ Auto-continuing through paid ability window
[repeats indefinitely]
```

Had to manually `jack-out` to escape the loop.

**Expected behavior**:
1. Try ability
2. Detect failure (timeout = can't afford)
3. Check if can afford â†’ NO
4. Fall back to "letting subs fire" message
5. Signal Corp and wait for sub resolution

**Severity**: HIGH - causes infinite loop requiring manual intervention

**Suggested fix**: In `handle-runner-full-break`, track failed ability attempts per ICE position. After 1-2 failures, fall through to the "can't afford" path.

---

## Friction Point: Error message says "timeout" not "can't afford"

**Context**: Same as above - ability failed due to insufficient credits.

**Problem**: Error message says "Ability not confirmed in game log (timeout)" when the real issue is insufficient credits.

**Expected**: "Cannot afford Cleaver ability (need 1Â¢, have 0Â¢)"

**Severity**: MEDIUM - misleading error message

---

## What Worked Well

- **Jailbreak prompt**: Showed choices immediately after playing card âœ…
- **--full-break on Whitespace**: Correctly found and used Unity's "Fully break" ability âœ…
- **Hand output**: Shows abbreviated info on repeat views, full text on first view âœ…
- **Icebreaker costs in hand**: `â†’ 1Â¢:break 1, 2Â¢:+3str` is helpful âœ…
- **Board display**: Clean, shows rezzed/unrezzed state âœ…
- **Auto-end turn**: Works smoothly when clicks exhausted âœ…
- **Tank command**: Accepted authorization (though full-break overrode it)
- **Log-based fired sub detection**: Run ended cleanly after ETR sub fired âœ…

---

## Proposed Fixes (Priority Order)

1. **HIGH**: Fix `format-choice` to handle card objects from stack/deck searches
2. **HIGH**: Add failure tracking to `handle-runner-full-break` to escape loops
3. **MEDIUM**: Improve error messages to indicate "can't afford" vs generic timeout
